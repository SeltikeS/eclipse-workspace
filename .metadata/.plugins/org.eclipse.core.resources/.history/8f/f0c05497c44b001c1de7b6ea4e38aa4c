//============================================================================
// Name        : BusStops.cpp
// Author      : 
// Version     :
// Copyright   : Your copyright notice
// Description : Hello World in C++, Ansi-style
//============================================================================

#include <iostream>
#include <string>
#include <map>
using namespace std;

int main() {
	// Enter number of requests
	int q;
	cin >> q;

	// Enter Q requests
	for(int i = 0; i < q; ++i){

		string command;
		cin >> command;

		map<string, string> buses;

		// Add NEW_BUS to map BUSES
		if(command == "NEW_BUS"){
			string bus;
			int stop_count;
			cin >> bus >> stop_count;
			for(int j = 0; j < stop_count; ++j){
				string stop;
				cin >> stop;
				buses[bus] = stop;
			}

		// Display all BUSES that have stop STOP
		} else if(command == "BUSES_FOR_STOP"){
			string stop;
			cin >> stop;

		// Display all STOPs at BUS route and BUSES that you can change for	every STOP
		} else if(command == "STOPS_FOR_BUSES"){

		// Display ALL BUSES with all STOPs
		} else if(command == "ALL_BUSES"){
			if(buses.count() == 0){
				cout << "No buses" << endl;
			} else {
				for(const auto& bus : buses){
					cout << bus.first << ' ';

				}
			}



		}
	}


	return 0;
}
